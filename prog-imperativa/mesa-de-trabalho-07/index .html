<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>C√°lculo IMC</title>
</head>
<body>
    <h1>C√°lculo IMC</h1>
    
    <h2>IMC √© a sigla para √çndice de Massa Corp√≥rea, par√¢metro adotado pela Organiza√ß√£o Mundial de Sa√∫de para calcular o peso ideal de cada pessoa.</h2>
    
    <p>O √≠ndice √© calculado da seguinte maneira: divide-se o peso do paciente pela sua altura elevada ao quadrado. Diz-se que o indiv√≠duo tem peso normal quando o resultado do IMC est√° entre 18,5 e 24,9.<br>Quer descobrir seu IMC? Insira seu peso e sua altura nos campos abaixo e compare com os √≠ndices da tabela. Importante: siga os exemplos e use pontos como separadores.</p>
    
    <button onclick="executarSistemaDeImc()">Calcular IMC</button>

    <script type="text/javascript">
        /*
            N√≠vel I - Refatorando
            O que pode ser feito para melhorar a legibilidade¬π do c√≥digo?

            ¬πFacilidade de entendimento do algoritimo gerado no c√≥digo. 

            N√≠vel II - Adicionando novas funcionalidades
            O usu√°rio com sobrepeso, obsidade e/ou obsidade grave dever√£o:
            - Receber uma alerta recomendando uma consulta com nutricionista (Boleano - true ou false);
                - Caso a resposta seja sim, preencher√° com:
                    - Seu nome;
                    - Dia da semana que pretende se consultar;
                    - O hor√°rio do dia que pretende se consultar;
                    - Agradecer o usu√°rio pelo nome e informar o dia e hor√°rio da consulta com o Dra. Luana Nagydai.
                - Caso a resposta seja n√£o:
                    - Receber√° um pedido de agradecimento.

            N√≠vel III - Corre√ß√£o de error 
            (üçí do bolo)
            Recebemos um pedido de altera√ß√£o da cl√≠nica:
            O usu√°rio com sobrepeso, obsidade e/ou obsidade grave dever√£o:
            - Receber uma alerta recomendando uma consulta com nutricionista (Boleano - true ou false);
                - Caso a resposta seja sim, preencher√° com:
                    - Seu nome;
                    - Dia da semana que pretende se consultar;
                    - O hor√°rio do dia que pretende se consultar;
                    (ajuste)
                    - Confirmar com o usu√°rio se o dia e o hor√°rio est√£o corretos:
                        Caso a resposta seja sim:
                        - Segue o fluxo normalmente.
                    - Caso a resposta seja n√£o:
                        - Dia da semana que pretende se consultar;
                        - O hor√°rio do dia que pretende se consultar;
                    (fim do ajuste)
                    - Agradecer o usu√°rio pelo nome e informar o dia e hor√°rio da consulta com o Dra. Luana Nagydai.
                - Caso a resposta seja n√£o:
                    - Receber√° um pedido de agradecimento.

        */
       var nome = '';
       var peso = 0;
       var altura = 0;
       var resultadoImc = 0;
       var perfilImc = '';
       var ImcAcimaDoNormal = false;
       var respostaConsulta = false;
       var dataConsulta = '';
       var horaConsulta = '';
       
        function perguntarPeso() {
            peso = prompt('Qual seu peso');
        }

        function perguntarAltura() {
            altura = prompt('Qual sua Altura');
        }

        function calcularImc() {
            resultadoImc = peso / (altura * altura);
        }

        function definirPerfilImc() {
            const magreza = resultadoImc <= 18.5;
            const normal = resultadoImc >= 18.5 && resultadoImc <= 24.9;
            const sobrepeso =  resultadoImc >= 25 && resultadoImc <=29.9;
            const obesidade =  resultadoImc >=30 && resultadoImc <= 39.9;

            if(magreza) {
                perfilImc = 'MAGREZA';
            }
            else if(normal) {
                perfilImc = 'NORMAL';
            }
            else if(sobrepeso) {
                perfilImc = 'SOBREPESO';
                ImcAcimaDoNormal = true;
            }
            else if(obesidade) {
                perfilImc = 'OBESIDADE';
                ImcAcimaDoNormal = true;
            }
            else {
                perfilImc = 'OBESIDADE GRAVE';
                ImcAcimaDoNormal = true;
            }
        }

        function mostrarMensagem() {
            alert(`Seu IMC √© iqual a: ${resultadoImc.toFixed(2)} e sua seu perfil de IMC √©: ${perfilImc}`);
        }

        function indicarNutricionista() {
            if(ImcAcimaDoNormal) {
                respostaConsulta = confirm(`Seu IMC est√° em um n√≠vel acima do normal, gostaria de agendar uma consulta com um de nossos nutricionistas ?`);
            }

            else {
                alert('Agradecemos por utilizar nossa calculadora de IMC, nos indique para os amigos e vamos tornar juntos o mundo mais saud√°vel!')
            }
        }

        function perguntarNome() {
            nome = prompt('Qual o seu nome?');
        }

        function perguntarDataConsulta() {
            dataConsulta = prompt('Qual a data que voc√™ deseja se consultar (informar data no formato "dd/mm/yyy")')
        }

        function perguntarHoraConsulta() {
            horaConsulta = prompt('Informe agora a hora que deseja se consultar (informar hora  no formato "hh:mm")')
        }

        function marcarConsulta() {
            if(respostaConsulta) {
                perguntarNome();
                perguntarDataConsulta();
                perguntarHoraConsulta();
                alert(`${nome}, a sua consulta com a Dra. Luana Nagydai foi agendada para o dia ${dataConsulta}, no seguinte hor√°rio: ${horaConsulta}, agradecemos a prefer√™ncia.`)
            }
            else {
                alert(`Tudo bem ${nome}, estaremos dispon√≠veis caso mude de ideia, obrigado por utilizar nossa calculadora de IMC e nos indique para os amigos, vamos juntos tornar o mundo um lugar mais saud√°vel.`)
            }
        }

        function executarSistemaDeImc() {
            perguntarPeso();
            perguntarAltura();
            calcularImc();
            definirPerfilImc();
            mostrarMensagem();
            indicarNutricionista();
            marcarConsulta();
        }

        // function calcularImc() {
        //     var peso = prompt('Qual seu peso?');
        //     var altura = prompt('Qual sua Altura?');
        //     var resultadoImc = peso / (altura * altura);
        //     var perfilImc = resultadoImc <= 18.5 ? 'MACREZA' : 
        //                     resultadoImc >= 18.5 && resultadoImc <= 24.9 ? 'NORMAL' :
        //                     resultadoImc >= 25 && resultadoImc <=29.9 ? 'SOBREPESO' : 
        //                     resultadoImc >=30 && resultadoImc <= 39.9 ? 'OBSIDADE':'OBSIDADE GRAVE';
                            
        //     alert(`Seu IMC √© iqual a:${resultadoImc} e sua seu perfil √©:${perfilImc}`);
        // }
    </script>
</body>
</html>